# synapps â€” Master Plan

**Generated by:** Forge Orchestrator v1.1.0
**Date:** 2026-02-15 03:19 UTC
**Tasks:** 32

---

## Task Board

| ID | Title | Agent | Type | Status | Dependencies |
|----|-------|-------|------|--------|-------------|
| T-008 | Design Backend Stack Upgrade Plan | claude | design | Pending | - |
| T-009 | Upgrade Backend Dependencies | codex | implement | Pending | T-008 |
| T-010 | Refactor Backend for Pydantic v2 and SQLAlchemy 2.0 | codex | implement | Pending | T-009 |
| T-011 | Test Database Compatibility with PostgreSQL | gemini | test | Pending | T-010 |
| T-012 | Upgrade Alembic and Enable Auto-Migration | codex | implement | Pending | T-010 |
| T-013 | Upgrade Frontend Build Tool to Vite | codex | implement | Pending | - |
| T-014 | Migrate Frontend Styling to Tailwind and shadcn/ui | codex | implement | Pending | T-013 |
| T-015 | Enable TypeScript Strict Mode | codex | implement | Pending | T-013 |
| T-016 | Integrate Zustand for State Management | codex | implement | Pending | T-013 |
| T-017 | Update ReactFlow to v12 | codex | implement | Pending | T-013 |
| T-018 | Implement Design Tokens and Dark Mode | codex | implement | Pending | T-014 |
| T-019 | Redesign Workflow Editor UI | claude | implement | Pending | T-014, T-017, T-018 |
| T-020 | Implement Node Card Redesign and Validation | codex | implement | Pending | T-019 |
| T-021 | Implement Execution Visualization Features | codex | implement | Pending | T-019 |
| T-022 | Implement Dashboard and New Pages | codex | implement | Pending | T-014, T-018 |
| T-023 | Design Execution Engine Parallelism and Routing | claude | design | Pending | - |
| T-024 | Implement Execution Engine Upgrades | codex | implement | Pending | T-023, T-010 |
| T-025 | Implement FM-Agnostic LLM Node and Provider Adapters | codex | implement | Pending | T-024, T-020 |
| T-026 | Implement Core Applets: Image Gen, Memory, HTTP, Code, Transform, If/Else, Merge | codex | implement | Pending | T-024 |
| T-027 | Migrate Legacy Applets to New Nodes | codex | implement | Pending | T-025, T-026 |
| T-028 | Implement JWT Auth and API Key Security | codex | implement | Pending | T-010 |
| T-029 | Implement Security Features and Rate Limiting | codex | implement | Pending | T-029, T-026 |
| T-030 | Add ESLint, Prettier, Ruff, and Pre-commit Hooks | codex | implement | Pending | - |
| T-031 | Expand Backend Test Coverage to 80% | gemini | test | Pending | T-027, T-028, T-029, T-030 |
| T-032 | Expand Frontend Test Coverage to 70% | gemini | test | Pending | T-019, T-020, T-021, T-022, T-023 |
| T-033 | Implement CI/CD Pipeline with Coverage Reporting | codex | implement | Pending | T-032, T-033 |
| T-034 | Harden REST API and WebSocket Protocol | claude | implement | Pending | T-010, T-029 |
| T-035 | Optimize Backend and Frontend Performance | codex | implement | Pending | T-010, T-017 |
| T-036 | Optimize Database Indexes and Queries | codex | implement | Pending | T-010 |
| T-037 | Implement Docker Compose and Health Check Endpoint | codex | implement | Pending | T-010, T-013 |
| T-038 | Document Stack Upgrade and Migration Steps | gemini | document | Pending | T-011, T-012, T-013 |
| T-039 | Document New Applets and Execution Engine | gemini | document | Pending | T-025, T-026, T-027 |

---

## Task Details

### T-008: Design Backend Stack Upgrade Plan

Plan the migration of the backend codebase from Python 3.9/FastAPI 0.68/Pydantic v1/SQLAlchemy 1.4 to Python 3.11+, FastAPI 0.115+, Pydantic v2, and SQLAlchemy 2.0. Identify breaking changes, deprecated patterns, and required code updates. Specify steps for Alembic upgrade and database compatibility testing.

### T-009: Upgrade Backend Dependencies

Update backend dependencies to Python 3.11+, FastAPI 0.115+, Pydantic v2, SQLAlchemy 2.0, and latest Alembic. Update Dockerfile and requirements.txt/pyproject.toml accordingly.

### T-010: Refactor Backend for Pydantic v2 and SQLAlchemy 2.0

Update all backend code to use Pydantic v2 (removing v1 compat hacks like model_to_dict) and SQLAlchemy 2.0 (new ORM patterns, mapped_column). Remove deprecated FastAPI patterns.

### T-011: Test Database Compatibility with PostgreSQL

Test backend with PostgreSQL as the database to ensure compatibility and correct operation. Address any issues found.

### T-012: Upgrade Alembic and Enable Auto-Migration

Upgrade Alembic to latest version and configure auto-migration generation. Update migration scripts as needed.

### T-013: Upgrade Frontend Build Tool to Vite

Migrate frontend from CRA (react-scripts) to Vite 6. Update build scripts, configuration, and ensure app runs and builds successfully.

### T-014: Migrate Frontend Styling to Tailwind and shadcn/ui

Replace CSS modules with Tailwind CSS 4 and integrate shadcn/ui components. Refactor existing components to use new styling system.

### T-015: Enable TypeScript Strict Mode

Enable strict mode in TypeScript config and fix resulting type errors across the frontend codebase.

### T-016: Integrate Zustand for State Management

Add Zustand to frontend and refactor state management for workflow state, execution state, and settings to use Zustand stores.

### T-017: Update ReactFlow to v12

Upgrade ReactFlow to latest v12 and update usage in the workflow editor for improved performance and TypeScript support.

### T-018: Implement Design Tokens and Dark Mode

Define and implement design tokens for colors, spacing, and typography. Set dark mode as default with toggle support.

### T-019: Redesign Workflow Editor UI

Overhaul the workflow editor layout: collapsible node palette (left), ReactFlow canvas (center), node inspector (right), execution log (bottom), top bar (name/run/save).

### T-020: Implement Node Card Redesign and Validation

Update node cards to have category-colored borders, status indicators, mini-previews, port type hints, and connection validation logic.

### T-021: Implement Execution Visualization Features

Add animated edge flow, node glow effects, per-node progress indicators, and execution timeline bar to visualize workflow execution in real-time.

### T-022: Implement Dashboard and New Pages

Create dashboard with workflow cards, quick-run, search/filter, usage stats. Add settings page (API keys, theme, model selection) and applet library page.

### T-023: Design Execution Engine Parallelism and Routing

Design the upgraded execution engine supporting parallel execution, fan-in/fan-out, conditional routing, loop support, error handling, and execution history. Specify data structures, algorithms, and API changes.

### T-024: Implement Execution Engine Upgrades

Refactor orchestrator to support parallel execution, fan-in/fan-out, conditional and loop nodes, error handling (retries, timeouts, fallback), and full execution history.

### T-025: Implement FM-Agnostic LLM Node and Provider Adapters

Replace WriterApplet with a universal LLM Node supporting OpenAI, Anthropic, Google, Ollama, and custom endpoints. Implement provider adapter pattern, node config UI, and streaming via SSE.

### T-026: Implement Core Applets: Image Gen, Memory, HTTP, Code, Transform, If/Else, Merge

Implement new universal applets: Image Gen Node, upgraded Memory Node (persistent vector store), HTTP Request Node, Code Node (sandboxed), Transform Node, If/Else Node, Merge Node.

### T-027: Migrate Legacy Applets to New Nodes

Implement migration logic to auto-convert WriterApplet, ArtistApplet, and MemoryApplet to the new LLM Node, Image Gen Node, and upgraded Memory Node, preserving user data.

### T-028: Implement JWT Auth and API Key Security

Add JWT-based authentication with refresh tokens, email/password registration and login, API key authentication, and encrypted storage of API keys.

### T-029: Implement Security Features and Rate Limiting

Add CORS configuration, rate limiting per user, input sanitization, HTTPS enforcement in production, and sandboxing for Code Node.

### T-030: Add ESLint, Prettier, Ruff, and Pre-commit Hooks

Integrate ESLint 9 (flat config), Prettier, Ruff for Python, and pre-commit hooks for linting, formatting, and type checking.

### T-031: Expand Backend Test Coverage to 80%

Write unit and integration tests for all applets, orchestrator engine, API endpoints, and auth flow to achieve at least 80% coverage.

### T-032: Expand Frontend Test Coverage to 70%

Write unit, integration, and E2E tests (Vitest, React Testing Library, Playwright) for all components, state, and flows to reach 70%+ coverage.

### T-033: Implement CI/CD Pipeline with Coverage Reporting

Set up GitHub Actions for lint, type-check, test, build on PRs. Add coverage reporting and separate deploy pipelines for staging and production.

### T-034: Harden REST API and WebSocket Protocol

Ensure REST API uses consistent error format, pagination, strict request validation, and versioning. Update WebSocket protocol for structured messages, reconnection, and authentication.

### T-035: Optimize Backend and Frontend Performance

Implement backend async everywhere, connection pooling, lazy applet loading. On frontend, add code splitting, tree-shaking, and ReactFlow virtualization.

### T-036: Optimize Database Indexes and Queries

Add indexes on frequently queried columns and optimize queries for flow history and run status.

### T-037: Implement Docker Compose and Health Check Endpoint

Create Docker Compose setup for orchestrator, frontend, and PostgreSQL. Add /health endpoint returning status, version, and uptime.

### T-038: Document Stack Upgrade and Migration Steps

Write documentation for the stack upgrade, migration steps, and any breaking changes for contributors.

### T-039: Document New Applets and Execution Engine

Write user and developer documentation for new applets, execution engine features, and FM-agnostic LLM node.

